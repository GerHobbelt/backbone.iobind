/*!
 * backbone.iobind
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 * https://github.com/logicalparadox/backbone.iobind
 */

Backbone.sync=function(a,b,c){var d=function(a){return!a||!a.url?null:_.isFunction(a.url)?a.url():a.url},e=d(b).split("/"),f=e[0]!==""?e[0]:e[1],g=_.extend({req:f+":"+a},c);g.data=b.toJSON()||{};var h=window.socket||Backbone.socket;h.emit(f+":"+a,g.data,function(a,b){a?c.error(a):c.success(b)})}